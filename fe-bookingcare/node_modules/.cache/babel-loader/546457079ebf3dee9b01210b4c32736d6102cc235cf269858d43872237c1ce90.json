{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { getHomeDoctors, getHomeFacilities, getHomeSpecialties } from '../api/home.api';\n\n/**\r\n * useHomeData\r\n *\r\n * MỤC ĐÍCH:\r\n * - Lấy toàn bộ dữ liệu cho trang Home\r\n * - Quản lý trạng thái loading / error\r\n * - Đảm bảo UI KHÔNG BAO GIỜ trắng\r\n */\nexport const useHomeData = () => {\n  _s();\n  // ========================\n  // STATE QUẢN LÝ DỮ LIỆU\n  // ========================\n\n  // Danh sách bác sĩ cho Home\n  const [doctors, setDoctors] = useState([]);\n\n  // Danh sách chuyên khoa cho Home\n  const [specialties, setSpecialties] = useState([]);\n\n  // Danh sách cơ sở y tế cho Home\n  const [facilities, setFacilities] = useState([]);\n\n  // Trạng thái loading (đang gọi API)\n  const [loading, setLoading] = useState(true);\n\n  // Trạng thái lỗi (nếu API fail)\n  const [error, setError] = useState(null);\n\n  // ========================\n  // SIDE EFFECT: GỌI API\n  // ========================\n\n  useEffect(() => {\n    // Cờ để tránh setState khi component đã unmount\n    let isMounted = true;\n\n    // Hàm async lấy dữ liệu cho Home\n    const fetchHomeData = async () => {\n      try {\n        /**\r\n         * Gọi song song 3 API:\r\n         * - Bác sĩ nổi bật\r\n         * - Chuyên khoa phổ biến\r\n         * - Cơ sở y tế nổi bật\r\n         */\n        const [doctorRes, specialtyRes, facilityRes] = await Promise.all([getHomeDoctors(), getHomeSpecialties(), getHomeFacilities()]);\n\n        // Nếu component đã bị unmount thì dừng\n        if (!isMounted) return;\n\n        /**\r\n         * Gán dữ liệu vào state\r\n         * - Có data → dùng\r\n         * - Không có → fallback []\r\n         */\n        setDoctors((doctorRes === null || doctorRes === void 0 ? void 0 : doctorRes.data) || []);\n        setSpecialties((specialtyRes === null || specialtyRes === void 0 ? void 0 : specialtyRes.data) || []);\n        setFacilities((facilityRes === null || facilityRes === void 0 ? void 0 : facilityRes.data) || []);\n      } catch (err) {\n        /**\r\n         * Nếu API lỗi:\r\n         * - Log lỗi để dev biết\r\n         * - Không cho UI crash\r\n         * - Set data rỗng để UI vẫn render\r\n         */\n        console.error('HOME API ERROR:', err);\n        if (!isMounted) return;\n        setError(err);\n        setDoctors([]);\n        setSpecialties([]);\n        setFacilities([]);\n      } finally {\n        /**\r\n         * Dù API thành công hay thất bại\r\n         * → loading PHẢI = false\r\n         *\r\n         * Đây là dòng QUAN TRỌNG NHẤT\r\n         * nếu thiếu → UI sẽ trắng\r\n         */\n        if (isMounted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    // Gọi hàm fetch dữ liệu\n    fetchHomeData();\n\n    /**\r\n     * Cleanup function:\r\n     * - Chạy khi component unmount\r\n     * - Tránh memory leak\r\n     * - Tránh warning: setState on unmounted component\r\n     */\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  // ========================\n  // GIÁ TRỊ TRẢ VỀ CHO PAGE\n  // ========================\n\n  return {\n    doctors,\n    // dữ liệu bác sĩ\n    specialties,\n    // dữ liệu chuyên khoa\n    facilities,\n    // dữ liệu cơ sở y tế\n    loading,\n    // trạng thái loading\n    error // lỗi (nếu có)\n  };\n};\n_s(useHomeData, \"clAzcR4XWw8vfQal3jWxshazis4=\");","map":{"version":3,"names":["useEffect","useState","getHomeDoctors","getHomeFacilities","getHomeSpecialties","useHomeData","_s","doctors","setDoctors","specialties","setSpecialties","facilities","setFacilities","loading","setLoading","error","setError","isMounted","fetchHomeData","doctorRes","specialtyRes","facilityRes","Promise","all","data","err","console"],"sources":["C:/Users/Hi/Desktop/booking-care-v2/fe-bookingcare/src/hooks/useHomeData.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport {\r\n  getHomeDoctors,\r\n  getHomeFacilities,\r\n  getHomeSpecialties,\r\n} from '../api/home.api';\r\n\r\n/**\r\n * useHomeData\r\n *\r\n * MỤC ĐÍCH:\r\n * - Lấy toàn bộ dữ liệu cho trang Home\r\n * - Quản lý trạng thái loading / error\r\n * - Đảm bảo UI KHÔNG BAO GIỜ trắng\r\n */\r\nexport const useHomeData = () => {\r\n\r\n  // ========================\r\n  // STATE QUẢN LÝ DỮ LIỆU\r\n  // ========================\r\n\r\n  // Danh sách bác sĩ cho Home\r\n  const [doctors, setDoctors] = useState([]);\r\n\r\n  // Danh sách chuyên khoa cho Home\r\n  const [specialties, setSpecialties] = useState([]);\r\n\r\n  // Danh sách cơ sở y tế cho Home\r\n  const [facilities, setFacilities] = useState([]);\r\n\r\n  // Trạng thái loading (đang gọi API)\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Trạng thái lỗi (nếu API fail)\r\n  const [error, setError] = useState(null);\r\n\r\n  // ========================\r\n  // SIDE EFFECT: GỌI API\r\n  // ========================\r\n\r\n  useEffect(() => {\r\n    // Cờ để tránh setState khi component đã unmount\r\n    let isMounted = true;\r\n\r\n    // Hàm async lấy dữ liệu cho Home\r\n    const fetchHomeData = async () => {\r\n      try {\r\n        /**\r\n         * Gọi song song 3 API:\r\n         * - Bác sĩ nổi bật\r\n         * - Chuyên khoa phổ biến\r\n         * - Cơ sở y tế nổi bật\r\n         */\r\n        const [doctorRes, specialtyRes, facilityRes] = await Promise.all([\r\n          getHomeDoctors(),\r\n          getHomeSpecialties(),\r\n          getHomeFacilities(),\r\n        ]);\r\n\r\n        // Nếu component đã bị unmount thì dừng\r\n        if (!isMounted) return;\r\n\r\n        /**\r\n         * Gán dữ liệu vào state\r\n         * - Có data → dùng\r\n         * - Không có → fallback []\r\n         */\r\n        setDoctors(doctorRes?.data || []);\r\n        setSpecialties(specialtyRes?.data || []);\r\n        setFacilities(facilityRes?.data || []);\r\n      } catch (err) {\r\n        /**\r\n         * Nếu API lỗi:\r\n         * - Log lỗi để dev biết\r\n         * - Không cho UI crash\r\n         * - Set data rỗng để UI vẫn render\r\n         */\r\n        console.error('HOME API ERROR:', err);\r\n\r\n        if (!isMounted) return;\r\n\r\n        setError(err);\r\n        setDoctors([]);\r\n        setSpecialties([]);\r\n        setFacilities([]);\r\n      } finally {\r\n        /**\r\n         * Dù API thành công hay thất bại\r\n         * → loading PHẢI = false\r\n         *\r\n         * Đây là dòng QUAN TRỌNG NHẤT\r\n         * nếu thiếu → UI sẽ trắng\r\n         */\r\n        if (isMounted) {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Gọi hàm fetch dữ liệu\r\n    fetchHomeData();\r\n\r\n    /**\r\n     * Cleanup function:\r\n     * - Chạy khi component unmount\r\n     * - Tránh memory leak\r\n     * - Tránh warning: setState on unmounted component\r\n     */\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  // ========================\r\n  // GIÁ TRỊ TRẢ VỀ CHO PAGE\r\n  // ========================\r\n\r\n  return {\r\n    doctors,       // dữ liệu bác sĩ\r\n    specialties,   // dữ liệu chuyên khoa\r\n    facilities,    // dữ liệu cơ sở y tế\r\n    loading,       // trạng thái loading\r\n    error,         // lỗi (nếu có)\r\n  };\r\n};\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SACEC,cAAc,EACdC,iBAAiB,EACjBC,kBAAkB,QACb,iBAAiB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAE/B;EACA;EACA;;EAEA;EACA,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;;EAE1C;EACA,MAAM,CAACQ,WAAW,EAAEC,cAAc,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;;EAElD;EACA,MAAM,CAACU,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;;EAEhD;EACA,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;;EAE5C;EACA,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACA;EACA;;EAEAD,SAAS,CAAC,MAAM;IACd;IACA,IAAIiB,SAAS,GAAG,IAAI;;IAEpB;IACA,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF;AACR;AACA;AACA;AACA;AACA;QACQ,MAAM,CAACC,SAAS,EAAEC,YAAY,EAAEC,WAAW,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAC/DrB,cAAc,CAAC,CAAC,EAChBE,kBAAkB,CAAC,CAAC,EACpBD,iBAAiB,CAAC,CAAC,CACpB,CAAC;;QAEF;QACA,IAAI,CAACc,SAAS,EAAE;;QAEhB;AACR;AACA;AACA;AACA;QACQT,UAAU,CAAC,CAAAW,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEK,IAAI,KAAI,EAAE,CAAC;QACjCd,cAAc,CAAC,CAAAU,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEI,IAAI,KAAI,EAAE,CAAC;QACxCZ,aAAa,CAAC,CAAAS,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEG,IAAI,KAAI,EAAE,CAAC;MACxC,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZ;AACR;AACA;AACA;AACA;AACA;QACQC,OAAO,CAACX,KAAK,CAAC,iBAAiB,EAAEU,GAAG,CAAC;QAErC,IAAI,CAACR,SAAS,EAAE;QAEhBD,QAAQ,CAACS,GAAG,CAAC;QACbjB,UAAU,CAAC,EAAE,CAAC;QACdE,cAAc,CAAC,EAAE,CAAC;QAClBE,aAAa,CAAC,EAAE,CAAC;MACnB,CAAC,SAAS;QACR;AACR;AACA;AACA;AACA;AACA;AACA;QACQ,IAAIK,SAAS,EAAE;UACbH,UAAU,CAAC,KAAK,CAAC;QACnB;MACF;IACF,CAAC;;IAED;IACAI,aAAa,CAAC,CAAC;;IAEf;AACJ;AACA;AACA;AACA;AACA;IACI,OAAO,MAAM;MACXD,SAAS,GAAG,KAAK;IACnB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA;EACA;;EAEA,OAAO;IACLV,OAAO;IAAQ;IACfE,WAAW;IAAI;IACfE,UAAU;IAAK;IACfE,OAAO;IAAQ;IACfE,KAAK,CAAU;EACjB,CAAC;AACH,CAAC;AAACT,EAAA,CA7GWD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}