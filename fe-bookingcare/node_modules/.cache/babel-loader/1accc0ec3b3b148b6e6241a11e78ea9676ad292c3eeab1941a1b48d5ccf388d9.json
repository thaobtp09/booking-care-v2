{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hi\\\\Desktop\\\\booking-care-v2\\\\fe-bookingcare\\\\src\\\\pages\\\\permissions\\\\PermissionPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getRoles, getPermissions, getRolePermissions, updateRolePermissions } from \"../../api/admin.api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PermissionPage = () => {\n  _s();\n  const [roles, setRoles] = useState([]);\n  const [permissions, setPermissions] = useState([]);\n  const [selectedRoleId, setSelectedRoleId] = useState(null);\n  const [checkedPermissions, setCheckedPermissions] = useState([]);\n\n  /* ===== LOAD ROLE + PERMISSION ===== */\n  useEffect(() => {\n    const fetchInitData = async () => {\n      try {\n        const [roleRes, permRes] = await Promise.all([getRoles(), getPermissions()]);\n        setRoles(roleRes.data || []);\n        setPermissions(permRes.data || []);\n      } catch {\n        alert(\"Kh√¥ng t·∫£i ƒë∆∞·ª£c role / permission\");\n      }\n    };\n    fetchInitData();\n  }, []);\n\n  /* ===== CH·ªåN ROLE ‚Üí LOAD PERMISSION ===== */\n  const handleSelectRole = async roleId => {\n    setSelectedRoleId(roleId);\n    try {\n      const res = await getRolePermissions(roleId);\n      const permissionIds = res.data.map(p => p.id);\n      setCheckedPermissions(permissionIds);\n    } catch {\n      alert(\"Kh√¥ng load ƒë∆∞·ª£c permission c·ªßa role\");\n      setCheckedPermissions([]);\n    }\n  };\n\n  /* ===== TOGGLE ===== */\n  const togglePermission = permissionId => {\n    setCheckedPermissions(prev => prev.includes(permissionId) ? prev.filter(id => id !== permissionId) : [...prev, permissionId]);\n  };\n\n  /* ===== UPDATE ===== */\n  const handleUpdate = async () => {\n    if (!selectedRoleId) {\n      alert(\"Vui l√≤ng ch·ªçn role\");\n      return;\n    }\n    try {\n      await assignPermissionToRole(selectedRoleId, {\n        permissionIds: checkedPermissions\n      });\n      alert(\"C·∫≠p nh·∫≠t permission th√†nh c√¥ng\");\n    } catch {\n      alert(\"C·∫≠p nh·∫≠t permission th·∫•t b·∫°i\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 24\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Ph\\xE2n quy\\u1EC1n h\\u1EC7 th\\u1ED1ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpdate,\n        children: \"\\uD83D\\uDCBE C\\u1EADp nh\\u1EADt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: 32,\n        marginTop: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 240,\n          borderRight: \"1px solid #ddd\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Role\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), roles.map(role => /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: \"block\",\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"role\",\n            checked: selectedRoleId === role.id,\n            onChange: () => handleSelectRole(role.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), \" \", role.name]\n        }, role.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          display: \"grid\",\n          gridTemplateColumns: \"repeat(3, 1fr)\",\n          gap: 8\n        },\n        children: permissions.map(p => /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: checkedPermissions.includes(p.id),\n            onChange: () => togglePermission(p.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), \" \", p.name]\n        }, p.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(PermissionPage, \"xjrAzw2yiOcAaKa0INLuGuUHI50=\");\n_c = PermissionPage;\nexport default PermissionPage;\nvar _c;\n$RefreshReg$(_c, \"PermissionPage\");","map":{"version":3,"names":["React","useEffect","useState","getRoles","getPermissions","getRolePermissions","updateRolePermissions","jsxDEV","_jsxDEV","PermissionPage","_s","roles","setRoles","permissions","setPermissions","selectedRoleId","setSelectedRoleId","checkedPermissions","setCheckedPermissions","fetchInitData","roleRes","permRes","Promise","all","data","alert","handleSelectRole","roleId","res","permissionIds","map","p","id","togglePermission","permissionId","prev","includes","filter","handleUpdate","assignPermissionToRole","style","padding","children","display","justifyContent","fileName","_jsxFileName","lineNumber","columnNumber","onClick","gap","marginTop","width","borderRight","role","marginBottom","type","name","checked","onChange","flex","gridTemplateColumns","_c","$RefreshReg$"],"sources":["C:/Users/Hi/Desktop/booking-care-v2/fe-bookingcare/src/pages/permissions/PermissionPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  getRoles,\r\n  getPermissions,\r\n  getRolePermissions,\r\n  updateRolePermissions,\r\n} from \"../../api/admin.api\";\r\n\r\nconst PermissionPage = () => {\r\n  const [roles, setRoles] = useState([]);\r\n  const [permissions, setPermissions] = useState([]);\r\n  const [selectedRoleId, setSelectedRoleId] = useState(null);\r\n  const [checkedPermissions, setCheckedPermissions] = useState([]);\r\n\r\n  /* ===== LOAD ROLE + PERMISSION ===== */\r\n  useEffect(() => {\r\n    const fetchInitData = async () => {\r\n      try {\r\n        const [roleRes, permRes] = await Promise.all([\r\n          getRoles(),\r\n          getPermissions(),\r\n        ]);\r\n\r\n        setRoles(roleRes.data || []);\r\n        setPermissions(permRes.data || []);\r\n      } catch {\r\n        alert(\"Kh√¥ng t·∫£i ƒë∆∞·ª£c role / permission\");\r\n      }\r\n    };\r\n\r\n    fetchInitData();\r\n  }, []);\r\n\r\n  /* ===== CH·ªåN ROLE ‚Üí LOAD PERMISSION ===== */\r\n  const handleSelectRole = async (roleId) => {\r\n    setSelectedRoleId(roleId);\r\n\r\n    try {\r\n      const res = await getRolePermissions(roleId);\r\n      const permissionIds = res.data.map((p) => p.id);\r\n      setCheckedPermissions(permissionIds);\r\n    } catch {\r\n      alert(\"Kh√¥ng load ƒë∆∞·ª£c permission c·ªßa role\");\r\n      setCheckedPermissions([]);\r\n    }\r\n  };\r\n\r\n  /* ===== TOGGLE ===== */\r\n  const togglePermission = (permissionId) => {\r\n    setCheckedPermissions((prev) =>\r\n      prev.includes(permissionId)\r\n        ? prev.filter((id) => id !== permissionId)\r\n        : [...prev, permissionId]\r\n    );\r\n  };\r\n\r\n  /* ===== UPDATE ===== */\r\n  const handleUpdate = async () => {\r\n    if (!selectedRoleId) {\r\n      alert(\"Vui l√≤ng ch·ªçn role\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await assignPermissionToRole(selectedRoleId, {\r\n        permissionIds: checkedPermissions,\r\n      });\r\n\r\n      alert(\"C·∫≠p nh·∫≠t permission th√†nh c√¥ng\");\r\n    } catch {\r\n      alert(\"C·∫≠p nh·∫≠t permission th·∫•t b·∫°i\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      {/* HEADER */}\r\n      <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n        <h2>Ph√¢n quy·ªÅn h·ªá th·ªëng</h2>\r\n        <button onClick={handleUpdate}>üíæ C·∫≠p nh·∫≠t</button>\r\n      </div>\r\n\r\n      <div style={{ display: \"flex\", gap: 32, marginTop: 16 }}>\r\n        {/* ROLE */}\r\n        <div style={{ width: 240, borderRight: \"1px solid #ddd\" }}>\r\n          <h4>Role</h4>\r\n          {roles.map((role) => (\r\n            <label key={role.id} style={{ display: \"block\", marginBottom: 8 }}>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"role\"\r\n                checked={selectedRoleId === role.id}\r\n                onChange={() => handleSelectRole(role.id)}\r\n              />\r\n              {\" \"}{role.name}\r\n            </label>\r\n          ))}\r\n        </div>\r\n\r\n        {/* PERMISSION */}\r\n        <div\r\n          style={{\r\n            flex: 1,\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"repeat(3, 1fr)\",\r\n            gap: 8,\r\n          }}\r\n        >\r\n          {permissions.map((p) => (\r\n            <label key={p.id}>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={checkedPermissions.includes(p.id)}\r\n                onChange={() => togglePermission(p.id)}\r\n              />\r\n              {\" \"}{p.name}\r\n            </label>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PermissionPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}